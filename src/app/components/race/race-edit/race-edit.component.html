<div class="card">
  <div class="card-body">
    <h5 class="card-title">Basic info</h5>
    <form>
      <div class="row g-3 mb-3">
        <div class="col">
          <label for="name" class="form-label">Name</label>
          <input type="text" class="form-control" id="name" name="name" [(ngModel)]="race.name" />
        </div>
      </div>
      <div class="row g-3 mb-3">
        <div class="col">
          <label for="description" class="form-label">Description</label>
          <textarea class="form-control" id="description" name="description" [(ngModel)]="race.description"></textarea>
        </div>
      </div>
      <div class="row g-3 mb-3">
        <div class="col">
          <label for="size" class="form-label">Size</label>
          <select id="size" class="form-select">
            <option *ngFor="let size of sizes" [value]="size">{{ size }}</option>
          </select>
        </div>
        <div class="col">
          <label for="type" class="form-label">Type</label>
          <select id="type" class="form-select">
            <option *ngFor="let type of types" [value]="type">{{ type }}</option>
          </select>
        </div>
      </div>

      <div class="row g-3 mb-3">
        <div class="col-4">
          <label for="speed" class="form-label">Speed</label>
          <input type="text" class="form-control" id="speed" name="speed" [(ngModel)]="race.speed" />
        </div>
        <div class="col-4">
          <label for="flySpeed" class="form-label">Fly Speed</label>
          <input type="text" class="form-control" id="flySpeed" name="flySpeed" [(ngModel)]="race.flySpeed" />
        </div>
        <div class="col-4">
          <label for="swimSpeed" class="form-label">Swim Speed</label>
          <input type="text" class="form-control" id="swimSpeed" name="swimSpeed" [(ngModel)]="race.swimSpeed" />
        </div>
      </div>

      <div class="row g-3 mb-3">
        <h6 class="mb-2 text-muted">Features</h6>
        <div class="col-12 mt-0">
          <bs-sortable
            [(ngModel)]="race.Features"
            [itemTemplate]="itemTemplate"
            name="features"
            itemClass="card mb-2"
            itemActiveClass="sortableItemActive"
            wrapperClass="sortableWrapper"
          ></bs-sortable>
        </div>
        <div class="col-12 mt-0">
          <button (click)="openModalEditionFeature()" class="btn btn-primary">+ New Feature</button>
        </div>
      </div>

      <div class="row g-3 mb-3">
        <h6 class="mb-2 text-muted">Sub Races</h6>
        <div class="col-12 mt-0">
          <bs-sortable
            [(ngModel)]="race.SubRaces"
            [itemTemplate]="itemTemplate"
            name="subRaces"
            itemClass="card mb-2"
            itemActiveClass="sortableItemActive"
            wrapperClass="sortableWrapper"
          ></bs-sortable>
        </div>
        <div class="col-12 mt-0">
          <button (click)="openModalEditionFeature()" class="btn btn-primary">+ New Sub Race</button>
        </div>
      </div>

      <div class="d-flex flex-row-reverse mt-3">
        <button type="submit" (click)="onSubmit()" class="btn btn-success float-right">Save</button>
      </div>
    </form>
  </div>
</div>

<ng-template #itemTemplate let-item="item" let-index="index">
  <div class="card-body d-flex justify-content-between">
    <h5 class="card-title mb-0">{{ item.value.name }}</h5>
    <ul class="list-inline mb-0">
      <li class="list-inline-item">
        <button class="btn btn-sm btn-light" (click)="openModalEditionFeature(index)"><fa-icon [icon]="faPen"></fa-icon></button>
      </li>
      <li class="list-inline-item">
        <button class="btn btn-sm btn-light" (click)="deleteFeature(item.value.id)"><fa-icon [icon]="faXmark"></fa-icon></button>
      </li>
    </ul>
  </div>
</ng-template>
